<!doctype html>
<html lang="en-us">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Variable Font example - optical sizing</title>

    <style>
      @font-face {
        font-family: "Amstellet VF";
        src: url("fonts/AmstelvarAlpha-VF.woff2") format("woff2-variations");
        font-weight: 300 900;
        font-stretch: 75% 150%;
        font-style: normal;
        font-display: swap;
      }

      html {
        box-sizing: border-box;
        font-size: 100%;
      }

      *,
      *::before,
      *::after {
        box-sizing: inherit;
      }

      body {
        font:
          1.2em "Amstellet VF",
          Georgia,
          serif;
        margin: 20px;
        padding: 0;
      }

      .wrapper {
        width: 100%;
        display: grid;
        grid-template-columns: 1fr;
        grid-gap: 1rem;
      }

      @media screen and (min-width: 50rem) {
        .wrapper {
          grid-template-columns: 1fr 1fr;
        }
      }

      textarea {
        font-family: monospace;
        display: block;
        margin-bottom: 10px;
        height: 160px;
        background-color: #f4f7f8;
        border: none;
        border-left: 6px solid #558abb;
        color: #4d4e53;
        padding: 1rem 0;
        width: 100%;
      }

      textarea:nth-of-type(1) {
        height: 130px;
      }

      textarea:nth-of-type(2) {
        height: 100px;
      }

      .playable-buttons {
        text-align: right;
        width: 100%;
        padding: 0.5rem 0;
        font-size: 100%;
      }

      .section {
        width: 100%;
        border: 1px solid #4d4e53;
        border-radius: 2px;
        padding: 10px 14px 10px 10px;
        margin-bottom: 10px;
      }

      .section input {
        display: block;
        margin: 5px;
      }

      .container * {
        margin: 1.5rem 0;
      }

      .demo3 {
        --text-axis: 64;
      }
    </style>
    <style class="editable0">
      /* font-optical-sizing can be auto or none */
      .container0 * {
        font-size: 64px;
        font-optical-sizing: none;
      }
    </style>
    <style class="editable1">
      /* font-optical-sizing can be auto or none */
      .container1 * {
        font-size: 64px;
        font-optical-sizing: auto;
      }
    </style>
    <style class="editable2">
      /* optical range is from 8 to 144 */
      .container2 * {
        font-size: 64px;
        font-variation-settings: "opsz" 64;
      }
    </style>
    <style class="editable3">
      /* Adjust with slider & custom property */
      .container3 * {
        font-size: 64px;
        font-variation-settings: "opsz" var(--text-axis);
      }
    </style>
  </head>

  <body>
    <div class="wrapper">
      <div class="demo0">
        <section class="section section0">
          <div class="container container0">
            <p>Optical Size</p>
          </div>
        </section>
        <textarea class="playable-css0">
/* font-optical-sizing can be auto or none */
.container0 * {
 font-size: 64px;
 font-optical-sizing: none;
}</textarea
        >
        <textarea id="code0" class="playable-html0">
<div class="container container0">
  <p>Optical Size</p>
</div></textarea
        >
      </div>
      <div class="demo1">
        <section class="section section1">
          <div class="container container1">
            <p>Optical Size</p>
          </div>
        </section>
        <textarea class="playable-css1">
/* font-optical-sizing can be auto or none */
.container1 * {
  font-size: 64px;
  font-optical-sizing: auto;
}</textarea
        >
        <textarea id="code1" class="playable-html1">
<div class="container container1">
  <p>Optical Size</p>
</div></textarea
        >
      </div>
      <div class="demo2">
        <section class="section section2">
          <div class="container container2">
            <p>Optical Size</p>
          </div>
        </section>
        <textarea class="playable-css2">
/* optical size range is from 8 to 144 */
.container2 * {
  font-size: 64px;
  font-variation-settings: 'opsz' 64;
}</textarea
        >
        <textarea id="code2" class="playable-html2">
<div class="container container2">
  <p>Optical Size</p>
</div></textarea
        >
      </div>
      <div class="demo3">
        <section class="section section3">
          <div class="container container3">
            <p>Optical Size</p>
          </div>
        </section>
        <textarea class="playable-css3">
/* Adjust with slider & custom property */
.container3 * {
  font-size: 64px;
  font-variation-settings: 'opsz' var(--text-axis);
}</textarea
        >
        <textarea id="code3" class="playable-html3">
<div class="container container3">
  <p>Optical Size</p>
</div></textarea
        >
        <div class="controls range-slider">
          <label for="text-axis">Adjust Optical Sizing: </label
          ><input
            type="range"
            name="range-slider"
            value="64"
            id="text-axis"
            class="controls--slider"
            min="8"
            max="144" />
        </div>
      </div>
    </div>
    <div class="playable-buttons">
      <input id="reset" type="button" value="Reset" />
    </div>
  </body>
  <script>
    let section0 = document.querySelector(".section0");
    let editable0 = document.querySelector(".editable0");
    let textareaHTML0 = document.querySelector(".playable-html0");
    let textareaCSS0 = document.querySelector(".playable-css0");
    let section1 = document.querySelector(".section1");
    let editable1 = document.querySelector(".editable1");
    let textareaHTML1 = document.querySelector(".playable-html1");
    let textareaCSS1 = document.querySelector(".playable-css1");
    let section2 = document.querySelector(".section2");
    let editable2 = document.querySelector(".editable2");
    let textareaHTML2 = document.querySelector(".playable-html2");
    let textareaCSS2 = document.querySelector(".playable-css2");
    let section3 = document.querySelector(".section3");
    let editable3 = document.querySelector(".editable3");
    let textareaHTML3 = document.querySelector(".playable-html3");
    let textareaCSS3 = document.querySelector(".playable-css3");
    let rangeinput = document.querySelector(".controls--slider");
    let reset = document.getElementById("reset");
    let htmlCode0 = textareaHTML0.value;
    let cssCode0 = textareaCSS0.value;
    let htmlCode1 = textareaHTML1.value;
    let cssCode1 = textareaCSS1.value;
    let htmlCode2 = textareaHTML2.value;
    let cssCode2 = textareaCSS2.value;
    let htmlCode3 = textareaHTML3.value;
    let cssCode3 = textareaCSS3.value;

    function fillCode() {
      editable0.innerHTML = textareaCSS0.value;
      section0.innerHTML = textareaHTML0.value;
      editable1.innerHTML = textareaCSS1.value;
      section1.innerHTML = textareaHTML1.value;
      editable2.innerHTML = textareaCSS2.value;
      section2.innerHTML = textareaHTML2.value;
      editable3.innerHTML = textareaCSS3.value;
      section3.innerHTML = textareaHTML3.value;
      rangeinput.value = 64;
      document.querySelector(".demo3").style.setProperty("--text-axis", 64);
    }

    reset.addEventListener("click", function () {
      textareaHTML0.value = htmlCode0;
      textareaCSS0.value = cssCode0;
      textareaHTML1.value = htmlCode1;
      textareaCSS1.value = cssCode1;
      textareaHTML2.value = htmlCode2;
      textareaCSS2.value = cssCode2;
      textareaHTML3.value = htmlCode3;
      textareaCSS3.value = cssCode3;
      fillCode();
    });

    textareaHTML0.addEventListener("input", fillCode);
    textareaCSS0.addEventListener("input", fillCode);
    textareaHTML1.addEventListener("input", fillCode);
    textareaCSS1.addEventListener("input", fillCode);
    textareaHTML2.addEventListener("input", fillCode);
    textareaCSS2.addEventListener("input", fillCode);
    textareaHTML3.addEventListener("input", fillCode);
    textareaCSS3.addEventListener("input", fillCode);
    window.addEventListener("load", fillCode);

    // get the inputs
    const inputs = [].slice.call(
      document.querySelectorAll(".demo3 .controls input"),
    );

    // listen for changes
    inputs.forEach((input) => input.addEventListener("change", handleUpdate));
    inputs.forEach((input) =>
      input.addEventListener("mousemove", handleUpdate),
    );

    function handleUpdate(e) {
      document
        .querySelector(".demo3")
        .style.setProperty(`--${this.id}`, this.value);
    }
  </script>
</html>
